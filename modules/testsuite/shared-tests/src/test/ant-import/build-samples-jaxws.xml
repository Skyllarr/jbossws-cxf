<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~ JBoss, Home of Professional Open Source.
  ~ Copyright 2011, Red Hat, Inc., and individual contributors
  ~ as indicated by the @author tags. See the copyright.txt file in the
  ~ distribution for a full listing of individual contributors.
  ~
  ~ This is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ This software is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this software; if not, write to the Free
  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.
  -->

<project>

  <description>JBossWS test archive builder</description>

  <!-- ================================================================== -->
  <!-- Building                                                           -->
  <!-- ================================================================== -->

  <target name="build-samples-jaxws" description="Build the deployments.">

    <mkdir dir="${tests.output.dir}/test-libs"/>

	<!-- jaxws-classloading-service -->
	<jar destfile="${tests.output.dir}/test-libs/jaxws-classloading-service.jar">
		<fileset dir="${tests.output.dir}/test-classes">
			<include name="org/jboss/test/ws/jaxws/smoke/tools/service/HelloWorld.class" />
		</fileset>
	</jar>

	<!-- jaxws-classloading-types -->
	<jar destfile="${tests.output.dir}/test-libs/jaxws-classloading-types.jar">
		<fileset dir="${tests.output.dir}/test-classes">
			<include name="org/jboss/test/ws/jaxws/smoke/tools/service/Message.class" />
			<include name="org/jboss/test/ws/jaxws/smoke/tools/service/Echo.class" />
			<include name="org/jboss/test/ws/jaxws/smoke/tools/service/EchoResponse.class" />
		</fileset>
	</jar>

     <!-- jaxws-samples-serviceref -->
     <war warfile="${tests.output.dir}/test-libs/jaxws-samples-serviceref.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/serviceref/WEB-INF/web.xml">
        <classes dir="${tests.output.dir}/test-classes">
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EndpointImpl.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/Endpoint.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EndpointService.class"/>
        </classes>
     </war>
     <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-serviceref-appclient.jar">
        <fileset dir="${tests.output.dir}/test-classes">
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/ApplicationClient.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EndpointService.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/Endpoint.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/servicref/ApplicationClient.class"/>
      </fileset>
      <manifest>
          <attribute name="main-class" value="org.jboss.test.ws.jaxws.samples.serviceref.ApplicationClient"/>
      </manifest>
        <metainf dir="${tests.output.dir}/test-resources/jaxws/samples/serviceref/META-INF">
           <include name="application-client.xml"/>
           <include name="wsdl/**"/>
        </metainf>
     </jar>
     <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-serviceref-appclient.ear">
        <fileset dir="${tests.output.dir}/test-libs">
           <include name="jaxws-samples-serviceref-appclient.jar"/>
        </fileset>
     </jar>
     <war destfile="${tests.output.dir}/test-libs/jaxws-samples-serviceref-servlet-client.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/serviceref/servlet-client/WEB-INF/web.xml">
        <classes dir="${tests.output.dir}/test-classes">
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/ServletClient.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EndpointService.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/Endpoint.class"/>
        </classes>
        <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/serviceref/META-INF">
           <include name="wsdl/**"/>
        </webinf>
        <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/serviceref/servlet-client/WEB-INF">
           <include name="jboss-web.xml"/>
        </webinf>
     </war>
     <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-serviceref-ejbclient.jar">
        <fileset dir="${tests.output.dir}/test-classes">
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EJBClient.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EJBRemote.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/EndpointService.class"/>
           <include name="org/jboss/test/ws/jaxws/samples/serviceref/Endpoint.class"/>
        </fileset>
        <metainf dir="${tests.output.dir}/test-resources/jaxws/samples/serviceref/META-INF">
           <include name="ejb-jar.xml"/>
           <include name="jboss.xml"/>
           <include name="permissions.xml"/>
           <include name="wsdl/**"/>
        </metainf>
     </jar>

    <!-- jaxws-samples-webservice -->
    <war warfile="${tests.output.dir}/test-libs/jaxws-samples-webservice01-jse.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/webservice/WEB-INF01/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/JSEBean01.class"/>
      </classes>
    </war>
    <war warfile="${tests.output.dir}/test-libs/jaxws-samples-webservice02-jse.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/webservice/WEB-INF02/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/JSEBean02.class"/>
      </classes>
      <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/webservice/WEB-INF02">
        <include name="wsdl/**"/>
      </webinf>
    </war>
    <war warfile="${tests.output.dir}/test-libs/jaxws-samples-webservice03-jse.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/webservice/WEB-INF03/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/JSEBean03.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EndpointInterface03.class"/>
      </classes>
    </war>
    <jar jarfile="${tests.output.dir}/test-libs/jaxws-samples-webservice01-ejb3.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3Bean01.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3RemoteInterface.class"/>
      </fileset>
    </jar>
    <jar jarfile="${tests.output.dir}/test-libs/jaxws-samples-webservice02-ejb3.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3Bean02.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3RemoteInterface.class"/>
      </fileset>
      <metainf dir="${tests.output.dir}/test-resources/jaxws/samples/webservice/META-INF02">
        <include name="wsdl/**"/>
      </metainf>
    </jar>
    <jar jarfile="${tests.output.dir}/test-libs/jaxws-samples-webservice03-ejb3.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3Bean03.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EJB3RemoteInterface.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webservice/EndpointInterface03.class"/>
      </fileset>
    </jar>

     <!-- jaxws-samples-webserviceref -->
    <war warfile="${tests.output.dir}/test-libs/jaxws-samples-webserviceref.war" webxml="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/WEB-INF/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EndpointImpl.class"/>
      </classes>
    </war>
    <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-webserviceref-appclient.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EndpointClientOne.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EndpointService.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/Endpoint.class"/>
      </fileset>
      <metainf dir="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/META-INF">
        <include name="application-client.xml"/>
        <include name="jboss-client.xml"/>
        <include name="wsdl/**"/>
      </metainf>
      <manifest>
        <attribute name="main-class" value="org.jboss.test.ws.jaxws.samples.webserviceref.EndpointClientOne"/>
      </manifest>
    </jar>
    <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-webserviceref-appclient.ear">
       <fileset dir="${tests.output.dir}/test-libs">
          <include name="jaxws-samples-webserviceref-appclient.jar"/>
       </fileset>
    </jar>
    <war destfile="${tests.output.dir}/test-libs/jaxws-samples-webserviceref-servlet-client.war"
      webxml="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/WEB-INF-client/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/ServletClient.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EndpointService.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/MultipleEndpointService.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/Endpoint.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EchoResponse.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/Echo.class"/>
      </classes>
      <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/META-INF">
        <include name="wsdl/**"/>
      </webinf>
      <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/WEB-INF-client">
        <include name="jboss-web.xml"/>
      </webinf>
    </war>
    <jar destfile="${tests.output.dir}/test-libs/jaxws-samples-webserviceref-ejb3-client.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EJB3Client.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EJB3Remote.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EndpointService.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/Endpoint.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/EchoResponse.class"/>
        <include name="org/jboss/test/ws/jaxws/samples/webserviceref/Echo.class"/>
      </fileset>
      <metainf dir="${tests.output.dir}/test-resources/jaxws/samples/webserviceref/META-INF">
        <include name="jboss.xml"/>
        <include name="wsdl/**"/>
      	<include name="permissions.xml"/>
      </metainf>
    </jar>
  	
    <!-- jaxws-samples-webservicerefsec -->
	<jar destfile="${tests.output.dir}/test-libs/jaxws-samples-webservicerefsec.jar">
		<fileset dir="${tests.output.dir}/test-classes">
			<include name="org/jboss/test/ws/jaxws/samples/webservicerefsec/EndpointImpl.class" />
		</fileset>
	</jar>
    <war destfile="${tests.output.dir}/test-libs/jaxws-samples-webservicerefsec-servlet-client.war"
      webxml="${tests.output.dir}/test-resources/jaxws/samples/webservicerefsec/WEB-INF/web.xml">
      <classes dir="${tests.output.dir}/test-classes">
		<include name="org/jboss/test/ws/jaxws/samples/webservicerefsec/Client.class" />
		<include name="org/jboss/test/ws/jaxws/samples/webservicerefsec/Endpoint.class" />
		<include name="org/jboss/test/ws/jaxws/samples/webservicerefsec/EndpointService.class" />
      </classes>
      <webinf dir="${tests.output.dir}/test-resources/jaxws/samples/webservicerefsec/WEB-INF">
      	<include name="wsdl/**"/>
        <include name="jboss-web.xml"/>
      </webinf>
    </war>

    <!-- management-recording-as7.jar -->
    <jar destfile="${tests.output.dir}/test-libs/management-recording-as7.jar">
      <fileset dir="${tests.output.dir}/test-classes">
        <include name="org/jboss/test/ws/management/recording/Endpoint.class"/>
      	<include name="org/jboss/test/ws/management/recording/EndpointWithConfigImpl.class"/>
      </fileset>
      <manifest>
        <attribute name="Dependencies" value="org.jboss.logging"/>
      </manifest>
    </jar>
    
    <!-- Please add alphabetically -->

  </target>

</project>
